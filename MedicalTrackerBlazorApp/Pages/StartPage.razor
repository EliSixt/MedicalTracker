@page "/"
@inject Data.DataService Data

<h4>This is the startup page.</h4>
<br />
<p>
    Hello, welcome to the Medical Tracker.
    Helps you and your loved ones keep up with medicines, appointments, allegies, etc...
</p>

@if (Data.Patients.Count > 0)
{
    <p>Here is a list of all accessible patients.</p>
    @foreach (Patient patient in Data.Patients)
    {
        <li>
            Name: @patient.GeneralInfo.Name, DOB: @patient.GeneralInfo.DateOfBirth
        </li>
    }
}
<button @onclick="CreatePatient">Create Patient</button>
@if (CreatingANewPatient)
{
    <GetContactInfo @bind-Contact="Data.CurrentPatient.PatientInfo"></GetContactInfo>
    <GetGeneralInfo @bind-GeneralInfo="Data.CurrentPatient.GeneralInfo"></GetGeneralInfo>
    <GetDailyMedicines></GetDailyMedicines>//bind this to Data.CurrentPatient
    <GetAllergy></GetAllergy>//bind this to Data.CurrentPatient
    //future components
    <br />
    <br />
    <button @onclick="Data.AtEndSubmitAndAddPatient"> Save Patient</button>
    CreatingANewPatient = false;
}
@*make it to where the user can erase and edit Patients in the list. Add dates when the patients were added?*@
@code {
    //[Parameter]
    //public Patient Patient { get; set; } = new();
    //[Parameter]
    //public EventCallback<Patient> PatientChanged { get; set; }

    public bool CreatingANewPatient = false;
    public void CreatePatient()
    {
        CreatingANewPatient = true;
    }
}
